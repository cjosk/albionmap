<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Albion Online - Lonca Haritası</title>

    <!-- Leaflet.js Kütüphanesi (CSS ve JS) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

    <style>
        html, body {
            height: 100%; margin: 0; padding: 0;
            background-color: #1a1a1a;
            font-family: Arial, sans-serif;
        }
        #map {
            width: 100%; height: 100%;
            background-color: #333;
        }
        .leaflet-popup-content-wrapper, .leaflet-popup-tip {
            background-color: #2c3e50; color: #ecf0f1;
        }
        .leaflet-popup-content { font-size: 14px; }
        .leaflet-popup-close-button { color: #ecf0f1 !important; }
        .leaflet-control-layers {
            background-color: #2c3e50; color: #ecf0f1;
            padding: 10px; border-radius: 5px;
        }
    </style>
</head>
<body>

    <div id="map"></div>

    <script>
        // --- HARİTA AYARLARI ---
        const map = L.map('map', {
            crs: L.CRS.Simple,
            minZoom: 2,
            maxZoom: 5
        });

        // --- YENİ YAKLAŞIM: HARİTA PARÇALARINI MANUEL YERLEŞTİRME ---

        // Ekran görüntüsünde görünen ve maptiles klasörünüzde olan tüm dosyaların listesi.
        // Eğer eksik veya fazla varsa bu listeyi güncelleyebilirsiniz.
        const tileFiles = [
            'map_3_6.png', 'map_3_7.png', 'map_3_8.png', 'map_3_9.png',
            'map_4_5.png', 'map_4_6.png', 'map_4_7.png', 'map_4_8.png', 'map_4_9.png',
            'map_5_5.png', 'map_5_6.png', 'map_5_7.png', 'map_5_8.png', 'map_5_9.png',
            'map_6_5.png', 'map_6_6.png', 'map_6_7.png', 'map_6_8.png', 'map_6_9.png',
            'map_7_5.png', 'map_7_6.png', 'map_7_7.png', 'map_7_8.png', 'map_7_9.png',
            'map_8_5.png', 'map_8_6.png', 'map_8_7.png', 'map_8_8.png', 'map_8_9.png'
            // 'map_6_8 (1).png' dosyasını 'map_6_8.png' olarak varsaydım.
        ];

        const tileSize = 256; // Her bir harita parçasının piksel boyutu
        const mapLayer = L.layerGroup(); // Tüm parçaları bu katmana ekleyeceğiz

        tileFiles.forEach(filename => {
            // Dosya adından x ve y koordinatlarını çıkarıyoruz. Örn: "map_4_5.png" -> x=4, y=5
            const parts = filename.replace('map_', '').replace('.png', '').split('_');
            const x = parseInt(parts[0], 10);
            const y = parseInt(parts[1], 10);

            // Dosya adından koordinat çıkaramazsak bu adımı atla
            if (isNaN(x) || isNaN(y)) {
                console.error("Dosya adı anlaşılamadı:", filename);
                return;
            }

            // Her bir parçanın haritadaki köşe koordinatlarını hesaplıyoruz
            const topLeft = [y * tileSize, x * tileSize];
            const bottomRight = [(y + 1) * tileSize, (x + 1) * tileSize];
            const tileBounds = [topLeft, bottomRight];
            
            // Her bir harita parçasını bir resim katmanı olarak ekliyoruz
            L.imageOverlay(`maptiles/${filename}`, tileBounds).addTo(mapLayer);
        });

        mapLayer.addTo(map);

        // Haritayı ortala ve başlangıç zoom seviyesini ayarla (daha uzak bir görünüm için)
        map.setView([1920, 1536], 2);


        // --- VERİ GİRİŞİ (BURAYI KENDİNİZE GÖRE DÜZENLEYİN) ---
        const hideoutIcon = L.icon({
            iconUrl: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSIjM2E5OWQ0Ij48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEwIDIwdi02aDR2Nmg1di04aDNMMTIgM2wtOSA5aDN2OGg1eiIvPjwvc3ZnPg==',
            iconSize: [32, 32], iconAnchor: [16, 32], popupAnchor: [0, -32]
        });
        const territoryIcon = L.icon({
            iconUrl: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSIjZWM3NzRjIj48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDE seventLjI3TDE4LjE4IDIyIDE2LjU0IDE0LjgxIDEyIDEwLjMyIDcuNDYgMTQuODEgNS44MiAyMiIvPjwvc3ZnPg==',
            iconSize: [32, 32], iconAnchor: [16, 16], popupAnchor: [0, -16]
        });
        const myHideouts = [{ coords: [1500, 1500], name: "InTheEnd", description: "T8 Hideout" }];
        const myTerritories = [{ coords: [1800, 1800], name: "Yeşilvadi Çiftliği", description: "T5 Fiber Bölgesi" }];

        // --- İKONLARI HARİTAYA EKLEME ---
        const hideoutLayer = L.layerGroup();
        const territoryLayer = L.layerGroup();
        myHideouts.forEach(ho => { L.marker(ho.coords, {icon: hideoutIcon}).bindPopup(`<b>${ho.name}</b><br>${ho.description}`).addTo(hideoutLayer); });
        myTerritories.forEach(terry => { L.marker(terry.coords, {icon: territoryIcon}).bindPopup(`<b>${terry.name}</b><br>${terry.description}`).addTo(territoryLayer); });
        hideoutLayer.addTo(map);
        territoryLayer.addTo(map);
        L.control.layers({ "Harita": mapLayer }, { "Sığınaklar": hideoutLayer, "Bölgeler": territoryLayer }, { collapsed: false }).addTo(map);
        map.on('click', e => { console.log(`Koordinat: [${Math.round(e.latlng.lat)}, ${Math.round(e.latlng.lng)}]`); });
    </script>
</body>
</html>

